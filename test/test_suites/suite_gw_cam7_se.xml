<?xml version="1.0" encoding="UTF-8"?>

<suite name="gw_cam7_se" version="1.0">
  <group name="physics_after_coupler">
    <!--
      Gravity wave (multiple parameterization).

      This is the CAM7 with Spectral-Element dycore variant.
      The correct test SDF must be used depending on the
      CAM configuration, as the use of schemes differ between CAM4/5/6/7, the model top,
      WACCM, availability of topo file, and dynamical core.
        - use_gw_movmtn_pbl =  T      SE dycore CAM7 only.
        - use_gw_convect_dp =  T
        - use_gw_convect_sh =  F
        - use_gw_front =  T
        - use_gw_front_igw =  F
        - use_gw_oro =  F
        - use_gw_rdg_beta =  T        topo file available.
        - use_gw_rdg_gamma =  F

      To test this SDF, the topo file must be read in SIMA.
      (bnd_topo) to provide necessary data to the Ridge Beta scheme.
    -->

    <!-- Helper to read all possible constituents from file -->
    <scheme>initialize_constituents</scheme>

    <!-- Initialize all gravity wave parameterizations and read namelist -->
    <scheme>gravity_wave_drag_common</scheme>

    <!-- Interstitial: Prepare vertical profiles and accumulated quantities -->
    <scheme>check_energy_zero_fluxes</scheme>
    <scheme>gravity_wave_drag_prepare_profiles</scheme>

    <!-- Prepare vertical ramp coefficients to taper drag at top of model -->
    <scheme>gravity_wave_drag_top_taper</scheme>

    <!-- Moving mountain gravity wave drag (SE dycore only) -->
    <scheme>gravity_wave_drag_moving_mountain</scheme>
    <scheme>gravity_wave_drag_moving_mountain_diagnostics</scheme>

    <!-- Convective gravity wave drag (Beres et al.) - deep convection -->
    <scheme>gravity_wave_drag_convection_deep</scheme>
    <scheme>gravity_wave_drag_convection_deep_diagnostics</scheme>

    <!-- Frontally generated gravity wave drag -->
    <scheme>gravity_wave_drag_frontogenesis</scheme>
    <scheme>gravity_wave_drag_frontogenesis_diagnostics</scheme>

    <!-- Ridge gravity wave drag -->
    <scheme>gravity_wave_drag_ridge</scheme>
    <scheme>gravity_wave_drag_ridge_beta</scheme>
    <scheme>gravity_wave_drag_ridge_beta_diagnostics</scheme>

    <!-- Interstitial: Convert tendencies for dry constituents to dry air basis -->
    <scheme>convert_dry_constituent_tendencies_to_dry_air_basis</scheme>

    <!-- Diagnostic output for common gravity wave drag -->
    <scheme>gravity_wave_drag_common_diagnostics</scheme>

    <!-- Apply tendencies from gravity wave parameterizations -->
    <scheme>apply_tendency_of_eastward_wind</scheme>
    <scheme>apply_tendency_of_northward_wind</scheme>
    <scheme>apply_constituent_tendencies</scheme>
    <scheme>apply_heating_rate</scheme>
    <scheme>qneg</scheme>
    <scheme>geopotential_temp</scheme>
    <scheme>update_dry_static_energy</scheme>
  </group>
</suite>
