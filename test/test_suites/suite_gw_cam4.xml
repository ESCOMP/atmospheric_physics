<?xml version="1.0" encoding="UTF-8"?>

<suite name="gw_cam4" version="1.0">
  <group name="physics_after_coupler">
    <!--
      Gravity wave (multiple parameterization).

      This is the CAM4 variant.
      The correct test SDF must be used depending on the
      CAM configuration, as the use of schemes differ between CAM4/5/6/7, the model top,
      WACCM, availability of topo file, and dynamical core.
        - use_gw_movmtn_pbl =  F
        - use_gw_convect_dp =  F
        - use_gw_convect_sh =  F
        - use_gw_front =  F
        - use_gw_front_igw =  F
        - use_gw_oro =  T
        - use_gw_rdg_beta =  F
        - use_gw_rdg_gamma =  F
    -->

    <!-- Helper to read all possible constituents from file -->
    <scheme>initialize_constituents</scheme>

    <!-- Initialize all gravity wave parameterizations and read namelist -->
    <scheme>gravity_wave_drag_common</scheme>

    <!-- Interstitial: Prepare vertical profiles and accumulated quantities -->
    <scheme>check_energy_zero_fluxes</scheme>
    <scheme>gravity_wave_drag_prepare_profiles</scheme>

    <!-- Prepare vertical ramp coefficients to taper drag at top of model -->
    <scheme>gravity_wave_drag_top_taper</scheme>

    <!-- Orographic gravity wave drag -->
    <scheme>gravity_wave_drag_orographic</scheme>

    <!-- Interstitial: Convert tendencies for dry constituents to dry air basis -->
    <scheme>convert_dry_constituent_tendencies_to_dry_air_basis</scheme>

    <!-- Apply tendencies from gravity wave parameterizations -->
    <scheme>apply_tendency_of_eastward_wind</scheme>
    <scheme>apply_tendency_of_northward_wind</scheme>
    <scheme>apply_constituent_tendencies</scheme>
    <scheme>apply_heating_rate</scheme>
    <scheme>qneg</scheme>
    <scheme>geopotential_temp</scheme>
    <scheme>update_dry_static_energy</scheme>

    <!-- Check energy -->
    <scheme>check_energy_scaling</scheme>
    <scheme>check_energy_chng</scheme>
  </group>
</suite>
